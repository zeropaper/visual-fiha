{"version":3,"sources":["webpack:///./screen/view.js","webpack:///./layer/view.js","webpack:///./layer/canvas/view.js","webpack:///./layer/img/view.js","webpack:///./layer/svg/view.js","webpack:///./layer/txt/view.js","webpack:///./layer/video/view.js"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,iCAAiC,WAAW;AAC5C,4CAA4C,iBAAiB,EAAE;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA,2BAA2B;AAC3B,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;;;;;;;;;;;;;;AAcA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,QAAQ;AACnC;AACA;AACA;AACA;;;AAGA;;AAEA,mCAAmC,qBAAqB;AACxD;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,mBAAmB,aAAa;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,qDAAqD,aAAa;AAClE;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO,YAAY,aAAa;AAChC;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD,4B;;;;;;;;AC5QA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,mBAAmB,aAAa,SAAS,uFAAuF,WAAW,YAAY;AACxK,uCAAuC,WAAW,sBAAsB,kBAAkB,gBAAgB,eAAe;AACzH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,8CAA8C,SAAS;AACvD;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,2BAA2B,QAAQ;AACnC;AACA;AACA;AACA;;;AAGA;;AAEA,mCAAmC,qBAAqB;AACxD;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,CAAC;AACD;AACA,2B;;;;;;;;ACpIA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6BAA6B,aAAa;;AAE1C;AACA;AACA,KAAK;AACL;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,GAAG;;;AAGH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC,E;;;;;;;;AC5ED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,E;;;;;;;;AC5ED;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;ACjED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH,CAAC;AACD,8B;;;;;;;;ACdA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC,E","file":"4-build.js","sourcesContent":["'use strict';\nvar View = require('ampersand-view');\nvar LayerView = require('./../layer/view');\nrequire('./../layer/canvas/view');\nrequire('./../layer/svg/view');\nrequire('./../layer/video/view');\nrequire('./../layer/img/view');\nrequire('./../layer/txt/view');\n\n\nfunction signature(fn) {\n  var args = fn.toString().match('function[^(]*\\\\(([^)]*)\\\\)');\n  if (!args || !args[1].trim()) { return []; }\n  return args[1].split(',').map(function(a){ return a.trim(); });\n}\n\nvar signatures = {};\nfunction registerCommand(commandName, command) {\n  if (arguments.length === 1) {\n    if (typeof arguments[0] === 'function') {\n      command = arguments[0];\n      commandName = command.name;\n    }\n    else {\n      command = commands[arguments[0]];\n    }\n  }\n  else if (typeof command !== 'function') {\n    command = commands[commandName];\n  }\n  signatures[commandName] = signature(command);\n}\n\n\n\n\nvar commands = {\n  bootstrap: function bootstrap(state) {\n    this.update(state || {});\n  },\n  updateLayer: function(layer) {\n    var state = this.model.layers.get(layer.name);\n    if (state) {\n      state.set(layer);\n    }\n    else {\n      state = this.model.layers.add(layer);\n    }\n  },\n  updateLayers: function(layers, audio) {\n    if (audio) this.model.audio = audio;\n    this.model.layers.set(layers);\n  }\n};\n\nObject.keys(commands).forEach(registerCommand);\n\n\nvar clientMixin = {};\nclientMixin.initializeClient = function initializeClient() {\n  var channel = new window.BroadcastChannel('spike');\n  var follower = this;\n  var commandArgs;\n\n  channel.addEventListener('message', function(evt) {\n    var commandName = evt.data.command;\n    var command = commands[commandName];\n\n    if (typeof command !== 'function') {\n      return;\n    }\n\n    if (!signatures[commandName]) {\n      return;\n    }\n\n    commandArgs = signatures[commandName].map(function(argName) {\n      if (argName === 'timeStamp') return evt.timeStamp;\n      return evt.data.payload[argName];\n    });\n\n    command.apply(follower, commandArgs);\n  });\n\n  this.channel = channel;\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar ScreenView = View.extend(clientMixin, {\n  autoRender: true,\n\n  template: '<div class=\"screen\"></div>',\n\n  session: {\n    width: ['number', true, 400],\n    height: ['number', true, 300],\n    captureMouse: ['boolean', true, false],\n    captureDebug: ['boolean', true, false]\n  },\n\n  initialize: function () {\n    if (!this.model) {\n      throw new Error('Missing model option for ScreenView');\n    }\n    this.initializeClient();\n  },\n\n  derived: {\n    styleEl: {\n      deps: ['el'],\n      fn: function() {\n        var el = document.getElementById('vf-screen-styles');\n        if (!el) {\n          el = document.createElement('style');\n          el.id = 'vf-screen-styles';\n          el.appendChild(document.createTextNode(''));\n          document.head.appendChild(el);\n        }\n        return el;\n      }\n    },\n    sheet: {\n      deps: ['styleEl'],\n      fn: function() {\n        return this.styleEl.sheet;\n      }\n    },\n    cssRule: {\n      deps: ['sheet'],\n      fn: function() {\n        if (this.sheet.cssRules.length === 0) {\n          this.addRule('', 'opacity:1');\n        }\n        return this.sheet.cssRules[0];\n      }\n    }\n  },\n\n  addRule: function(selector, properties) {\n    var sheet = this.sheet;\n    this.el.id = this.el.id || 'vf-screen-' + this.cid;\n    var prefix = '#'+ this.el.id +' ';\n    var index = sheet.cssRules.length;\n    selector = (prefix + selector).trim();\n    for (var i = index - 1; i >= 0; i--) {\n      if (sheet.cssRules[i].selectorText === selector) {\n        sheet.deleteRule(i);\n      }\n    }\n\n\n    index = sheet.cssRules.length;\n\n    sheet.insertRule(selector + ' { ' + properties + ' } ', index);\n    return this;\n  },\n\n  setProperty: function(...args) {\n    this.cssRule.style.setProperty(...args);\n  },\n\n  remove: function() {\n    if (this.channel) {\n      this.channel.close();\n    }\n    return View.prototype.remove.apply(this, arguments);\n  },\n\n  resize: function () {\n    if (!this.el) { return this; }\n    this.setProperty('position', 'fixed');\n    this.setProperty('top', 0);\n    this.setProperty('left', 0);\n    this.setProperty('width', '100%');\n    this.setProperty('height', '100%');\n    if (!this.el || !this.el.parentNode) {\n      return this;\n    }\n    this.width = this.el.parentNode.clientWidth;\n    this.height = this.el.parentNode.clientHeight;\n    return this._resizeLayers();\n  },\n\n  _resizeLayers: function() {\n    if (!this.layersView || !this.layersView.views) { return this; }\n    var w = this.width;\n    var h = this.height;\n\n    this.layersView.views.forEach(function(view) {\n      view.width = w;\n      view.height = h;\n    });\n    return this;\n  },\n\n  render: function() {\n    if (!this.el) {\n      this.renderWithTemplate();\n    }\n\n    if (!this.layersView) {\n      this.layersView = this.renderCollection(this.model.layers, function(opts) {\n        var type = opts.model.getType();\n        var ScreenLayerConstructor = LayerView.types[type] || LayerView;\n        return new ScreenLayerConstructor(opts);\n      }, this.el, {parent: this});\n      this._updateLayers();\n    }\n\n    if (!this._ar) {\n      this._animate();\n    }\n\n    return this.resize();\n  },\n\n  update: function(options) {\n    if (!this.layersView) {\n      return this.render().update(options);\n    }\n\n    this.model.set(options);\n\n    return this;\n  },\n\n  _ar: null,\n  _animate: function(timestamp) {\n    this.model.frametime = timestamp || 0;\n    this._updateLayers();\n    this._ar = window.requestAnimationFrame(this._animate.bind(this));\n  },\n\n  _updateLayers: function() {\n    this.setProperty('--frametime', this.model.frametime);\n\n    var audio = this.model.audio;\n    if (audio && audio.frequency && audio.timeDomain) {\n      var length = audio.frequency.length;\n      var l, li = 0, af = 0, av = 0, ll = length / 16;\n\n      for (l = 0; l < length; l += ll) {\n        li++;\n        af += audio.frequency[l];\n        av += audio.timeDomain[l];\n        this.setProperty('--freq' + li, audio.frequency[l]);\n        this.setProperty('--vol' + li, audio.timeDomain[l]);\n      }\n      this.setProperty('--freqAvg', af / length);\n      this.setProperty('--volAvg', av / length);\n    }\n\n    this.layersView.views.forEach(function(subview) {\n      if (subview.model.active) subview.update();\n    });\n  }\n});\nmodule.exports = ScreenView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./screen/view.js\n// module id = 145\n// module chunks = 4","'use strict';\nvar View = require('ampersand-view');\n\nvar LayerView = View.extend({\n  template: function() {\n    return `\n      <div id=\"${this.model.getId()}\" view-id=\"${this.cid}\" class=\"missing-layer-view\" style=\"will-change:transform, opacity, backfaceVisibility;width:100%;height:100%;display:table\">\n        <div style=\"display:table-cell;color:#a66;vertical-align:middle;text-align:center;font-weight:700;font-size:30px;text-shadow:0 0 4px #000\">\n          Missing\n          <span data-hook=\"type\"></span> for\n          <span data-hook=\"name\"></span>\n          layer view\n          <br/>\n          <span data-hook=\"frametime\"></span>\n        </div>\n      </div>\n    `;\n  },\n\n  initialize: function() {\n    var view = this;\n    view.model.styleProperties.on('change', function(prop) {\n      view.setProperty(prop.name, prop.value);\n    });\n  },\n\n  derived: {\n    styleEl: {\n      deps: ['el'],\n      fn: function() {\n        var el = document.getElementById('style-' + this.model.getId());\n        if (!el) {\n          el = document.createElement('style');\n          el.id = 'style-' + this.model.getId();\n          el.appendChild(document.createTextNode(''));\n          document.head.appendChild(el);\n        }\n        return el;\n      }\n    },\n    sheet: {\n      deps: ['styleEl'],\n      fn: function() {\n        return this.styleEl.sheet;\n      }\n    },\n    cssRule: {\n      deps: ['sheet', 'model.layerStyles'],\n      fn: function() {\n        if (this.sheet.cssRules.length === 0) {\n          this.addRule('', this.model.layerStyles);\n        }\n        return this.sheet.cssRules[0];\n      }\n    },\n    layerStyleObj: {\n      deps: ['model', 'model.layerStyles'],\n      fn: function() {\n        var exp = /[\\s]*([^:]+)[\\s]*:[\\s]*([^;]+)[\\s]*;[\\s]*/gim;\n        return ((this.model.layerStyles || '').match(exp) || [])\n          .map(s => s\n            .trim()\n            .split(':')\n              .map(ss => ss\n                .replace(';', '')\n                .trim()));\n      }\n    }\n  },\n\n  session: {\n    width: ['number', true, 400],\n    height: ['number', true, 300]\n  },\n\n  bindings: {\n    'model.type': '[data-hook=type]',\n    'model.name': '[data-hook=name]',\n    'model.active': {type: 'toggle'},\n    'model.layerStyles': {\n      type: function() {\n        var style = this.cssRule.style;\n        this.layerStyleObj.forEach(function(arr) {\n          style[arr[0]] = arr[1];\n        });\n      }\n    },\n    'model.opacity': {\n      type: function(el, val) {\n        this.cssRule.style.opacity = val * 0.01;\n      }\n    },\n    'model.zIndex': {\n      type: function(el, val) {\n        this.cssRule.style.zIndex = val;\n      }\n    }\n  },\n\n  setProperty: function(...args) {\n    this.cssRule.style.setProperty(...args);\n  },\n\n  addRule: function(selector, properties) {\n    var sheet = this.sheet;\n    var prefix = '#'+ this.model.getId() +' ';\n    var index = sheet.cssRules.length;\n    selector = (selector.indexOf('@') === 0 ? selector : prefix + selector).trim();\n    for (var i = index - 1; i >= 0; i--) {\n      if (sheet.cssRules[i].selectorText === selector) {\n        sheet.deleteRule(i);\n      }\n    }\n\n\n    index = sheet.cssRules.length;\n\n    sheet.insertRule(selector + ' { ' + properties + ' } ', index);\n    return this;\n  },\n\n  remove: function() {\n    var styleEl = this.styleEl;\n    if (styleEl && styleEl.parentNode) {\n      styleEl.parentNode.removeChild(styleEl);\n    }\n    return View.prototype.remove.apply(this, arguments);\n  },\n\n  update: function() {}\n});\nLayerView.types = {};\nmodule.exports = LayerView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/view.js\n// module id = 652\n// module chunks = 4","'use strict';\nvar assign = require('lodash.assign');\n\nvar ScreenLayerView = require('./../view');\nmodule.exports = ScreenLayerView.types.canvas = ScreenLayerView.extend({\n  template: function() {\n    return '<canvas id=\"' + this.model.getId() + '\" view-id=\"' + this.cid + '\"></canvas>';\n  },\n\n  derived: {\n    offCanvas: {\n      deps: ['width', 'height', 'el'],\n      fn: function() {\n        var canvas = document.createElement('canvas');\n        canvas.width = this.width;\n        canvas.height = this.height;\n        return canvas;\n      }\n    },\n    ctx: {\n      deps: ['offCanvas'],\n      fn: function() {\n        return this.offCanvas.getContext('2d');\n      }\n    },\n    destCtx: {\n      deps: ['el', 'width', 'height'],\n      fn: function() {\n        return this.el.getContext('2d');\n      }\n    }\n  },\n\n  session: {\n    frames: ['number', true, 0]\n  },\n\n  update: function() {\n    ScreenLayerView.prototype.update.apply(this, arguments);\n    this.model.frametime = this.parent.model.frametime;\n    if (!this.parent || !this.parent.el) return;\n\n    var cw = this.width = this.parent.el.clientWidth;\n    var ch = this.height = this.parent.el.clientHeight;\n    var ctx = this.ctx;\n    ctx.clearRect(0, 0, cw, ch);\n    if (!this.model.active) { return this; }\n\n    this.model.canvasLayers.filter(function (layer) {\n      return layer.active;\n    }).forEach(function(layer) {\n      layer.draw(ctx);\n    });\n\n    this.frames++;\n    if (this.model.clear && this.frames >= this.model.clear) {\n      this.destCtx.clearRect(0, 0, cw, ch);\n      this.frames = 0;\n    }\n\n    this.destCtx.drawImage(this.offCanvas, 0, 0, cw, ch, 0, 0, cw, ch);\n\n    return this;\n  },\n\n\n  bindings: assign({\n    width: {\n      name: 'width',\n      type: 'attribute'\n    },\n    height: {\n      name: 'height',\n      type: 'attribute'\n    }\n  }, ScreenLayerView.prototype.bindings)\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/canvas/view.js\n// module id = 680\n// module chunks = 4","'use strict';\nvar ScreenLayerView = require('./../view');\nvar _cacheImgs = {};\nfunction loadImg(url, done) {\n  if (_cacheImgs[url]) {\n    return done(null, _cacheImgs[url]);\n  }\n\n  var img = new Image();\n  _cacheImgs[url] = img;\n  img.onload = function() {\n    console.info('loaded', url);\n    done(null, img);\n  };\n  img.onerror = function() {\n  };\n  img.src = url;\n  return done(null, _cacheImgs[url]);\n}\n\nmodule.exports = ScreenLayerView.types.img = ScreenLayerView.extend({\n  template: function() {\n    return '<div class=\"layer-image\" id=\"' + this.model.getId() + '\" view-id=\"' + this.cid + '\"><canvas></canvas></div>';\n  },\n\n  initialize: function() {\n    var view = this;\n    ScreenLayerView.prototype.initialize.apply(view, arguments);\n\n\n    function load() {\n      var src = view.model.src;\n      if (!src) return view.clearImage();\n      loadImg(src, function(err, img) {\n        view.drawImage(img);\n      });\n    }\n\n    view.on('change:width change:height', load);\n    view.model.on('change:src', load);\n    load();\n  },\n\n  derived: {\n    ctx: {\n      deps: ['el'],\n      fn: function() {\n        if (!this.el) return;\n        return this.query('canvas').getContext('2d');\n      }\n    }\n  },\n\n  _resizeCanvas: function() {\n    if (!this.el || !this.el.parentNode) return this;\n    var cnv = this.query('canvas');\n    var dw = this.el.parentNode.clientWidth;\n    var dh = this.el.parentNode.clientHeight;\n    if (cnv.width != dw) cnv.width = dw;\n    if (cnv.height != dh) cnv.height = dh;\n    return this;\n  },\n\n  clearImage: function() {\n    var ctx = this.ctx;\n    if (!ctx) return this;\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n    return this;\n  },\n\n  drawImage: function(img) {\n    var ctx = this._resizeCanvas().clearImage().ctx;\n    if (!ctx) return this;\n    ctx.drawImage(img, 0, 0, ctx.canvas.width, ctx.canvas.height);\n    return this;\n  }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/img/view.js\n// module id = 683\n// module chunks = 4","'use strict';\nvar ScreenLayerView = require('./../view');\n\nmodule.exports = ScreenLayerView.types.SVG = ScreenLayerView.extend({\n  autoRender: true,\n\n  template: function() {\n    return '<div class=\"layer-svg\" id=\"' + this.model.getId() + '\" view-id=\"' + this.cid + '\"></div>';\n  },\n\n  derived: {\n    svg: {\n      deps: ['el', 'model.content'],\n      fn: function() {\n        return this.el && this.model.content ? this.query('svg') || false : false;\n      }\n    }\n  },\n\n  updateStyles: function() {\n    if (!this.model.active || !this.el) return this;\n    var selectors = Object.keys(this.model.svgStyles);\n    selectors.forEach(function(selector) {\n      this.addRule(selector, this.model.svgStyles[selector]);\n    }, this);\n    return this;\n  },\n\n  updateProperties: function() {\n    if (!this.model.active || !this.el) return this;\n    this.model.styleProperties.forEach(function(styleProp) {\n      this.setProperty(styleProp.name, styleProp.value);\n    }, this);\n    return this;\n  },\n\n  updateContent: function() {\n    if (!this.el || this.el.innerHTML === this.model.content) return this;\n\n    this.el.innerHTML = this.model.content;\n    this.updateStyles().updateProperties();\n  },\n\n  initialize: function() {\n    ScreenLayerView.prototype.initialize.apply(this, arguments);\n    this.updateContent().updateStyles().updateProperties();\n\n    this.listenTo(this.model, 'change:content', this.updateContent);\n    this.on('change:el', this.updateContent);\n\n    this.listenToAndRun(this.model, 'change:svgStyles', this.updateStyles);\n    this.listenToAndRun(this.model.styleProperties, 'add remove change', this.updateProperties);\n  },\n\n  addRule: function(selector, properties) {\n    selector = 'svg ' + selector;\n    ScreenLayerView.prototype.addRule.call(this, selector, properties);\n    return this;\n  },\n\n  remove: function() {\n    var style = this.styleEl;\n    if (style && style.parentNode) style.parentNode.removeChild(style);\n    ScreenLayerView.prototype.remove.apply(this, arguments);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/svg/view.js\n// module id = 688\n// module chunks = 4","'use strict';\nvar assign = require('lodash.assign');\nvar LayerView = require('./../view');\nvar TxtLayerView = LayerView.types.txt = LayerView.extend({\n  autoRender: true,\n\n  template: function() {\n    return '<div class=\"layer-txt\" id=\"' + this.model.getId() + '\" view-id=\"' + this.cid + '\"><div class=\"text\"></div></div>';\n  },\n\n  bindings: assign(LayerView.prototype.bindings, {\n    'model.text': '.text'\n  })\n});\nmodule.exports = TxtLayerView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/txt/view.js\n// module id = 690\n// module chunks = 4","'use strict';\n\nvar ScreenLayerView = require('./../view');\nmodule.exports = ScreenLayerView.types.video = ScreenLayerView.extend({\n  template: function() {\n    return '<video id=\"' + this.model.cid + '\" view-id=\"' + this.cid + '\" autoplay loop muted></video>';\n  },\n\n  bindings: require('lodash.assign')({\n    'model.src': {\n      type: 'attribute',\n      name: 'src'\n    }\n  }, ScreenLayerView.prototype.bindings)\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/video/view.js\n// module id = 692\n// module chunks = 4"],"sourceRoot":""}